# System Glossary & Definitions

Цей документ фіксує єдину термінологію проєкту **bpm_prediction** для наукової реалізації та PoC-рішення, що надалі масштабуватиметься до enterprise-середовища.

---

## 1. Core Data Entities (Графові сутності)

### POKG (Process-Organizational Knowledge Graph)
Нормативна репрезентація **окремого** бізнес-процесу. Об'єднує топологію BPMN-моделі, організаційний контекст (ролі, ресурси) та бізнес-правила.
- **Особливість:** підтримує версійність ($\kappa$) та часові інтервали валідності.
- **Роль у системі:** локальний (process-level) шар знань.

### EPOKG (Enterprise Process-Organizational Knowledge Graph)
Розширений граф знань підприємства. Утворюється шляхом інтеграції множини POKG у спільний семантичний простір.
Нормативний граф підприємства. Відповідає $G_{struct}$.  
- **Роль у системі:** глобальний (enterprise-level) нормативний контекст.
- **Термінологічна примітка:** в документації не замінює POKG, а надбудовується над ним.

### Observed Graph (InstanceGraph, IG)
Граф виконання префіксу процесу. Відповідає математичному об’єкту $G_{obs}$.

### Fusion Graph — концептуальна структура.
У реалізації може бути представлений через оператор Γ без явного матеріалізованого графа.
Об’єднує $G_{obs}$ та $G_{struct}$.

### Оператор ін'єкції знань (Knowledge-Infusion Operator, $\Gamma$)
Оператор злиття локального стану екземпляра з глобальним нормативним контекстом EPOKG. У дисертації використовується як базовий механізм структурного збагачення стану перед інференсом.


### Technical Nodes (Технічні вузли)
Елементи графа, що не є бізнес-активностями (Gateways, Events, Pools, Lanes).
- **Роль у моделі:** формують причинно-наслідковий контекст (Causal Context) у FG.
- **Важливо для реалізації:** потребують маскування (masking) при обчисленні Loss-функції GNN, щоб не зміщувати оптимізацію на службові вузли.

---

## 2. Architectural Concepts (Архітектурні модулі та підходи)

### Гексагональна архітектура (Ports & Adapters)
Архітектурний стиль, у якому доменне ядро ізольоване від інфраструктури.
- Домен (Core ML) не залежить напряму від Neo4j/MSSQL/MLflow.
- Інтеграції реалізуються через **порти** (абстракції) та **адаптери** (конкретні реалізації).

### Clean Architecture (Чиста архітектура)
Принципова організація системи у вигляді концентричних шарів із правилом залежностей «назовні не впливає на ядро».
- Внутрішні шари: бізнес-правила/доменна логіка.
- Зовнішні шари: фреймворки, БД, API, трекінг експериментів.

### Pipeline (Конвеєр)
Система, розбита на ізольовані кроки, де вихід одного кроку є входом для наступного.
- Використовується для експериментів, відтворюваності та контрольованих абляцій.

### Strategy Pattern
Поведінковий патерн, де алгоритми взаємозамінні під час виконання.
- У проєкті застосовується для підміни стратегій детекції дрейфу, функцій втрат, конфігурацій моделей.

### Top-Down (Contract-First)
Підхід розробки, де спершу фіксуються контракти (інтерфейси, DTO, інваріанти), а потім реалізація.
- Дозволяє рано синхронізувати команди domain/data/infra.

### Iterative Enhancement
Ітеративне нарощування функціоналу короткими циклами зі збереженням працездатного ядра.
- Кожна ітерація завершується валідацією метрик/інваріантів і оновленням документації.

### Дуальна архітектура / Dual Architecture (Agent-Critic)
Механізм управління прогнозом, де:
- **Агент (Predictor):** локальна GNN-модель, що генерує прогноз наступного кроку.
- **Критик (Validator):** модуль макро-планування, що коригує прогноз на основі глобальних обмежень EPOKG.


### Reliability Semaphore (Семафор надійності) — дискретне представлення внутрішнього reliability_state 
(green / yellow / red), що формується Reliability Module.

Формується на основі:
- confidence_score
- drift_signal
- OOD detection

Не є механізмом детекції дрейфу, а використовує його сигнали.

### Version Embedding ($e_\kappa$)
Векторне подання версії регламенту, що використовується для domain conditioning та адаптації моделі без повного перенавчання.
- **Узгодження позначень:** $\kappa$ — дискретний ідентифікатор версії (version ID), тоді як $e_\kappa$ — його векторне представлення.

### Теоретико-управлінський підхід
Підхід, що розглядає PPM-систему як регулятор у замкненому контурі, де структурний дрейф є сигналом зворотного зв'язку для адаптації.

---

## 3. Logical System Layers (Логічні шари системи)

### 1) Data Ingestion (ETL)
Шар витягу і первинної нормалізації сирих логів (наприклад, Polars, pyodbc).

### 2) Knowledge Graph (Ontology)
Шар побудови/оновлення структури регламентів (EPOKG) і роботи з графовим сховищем (Neo4j через адаптери).

### 3) Tensor Adapter
Шар перетворення підграфів/станів у формат `torch_geometric.data.Data` для доменної ML-логіки.

### 4) Core ML (Domain)
Доменне ядро математичних моделей (Agent, Critic, Semaphore), яке працює тільки з тензорами та доменними абстракціями.

### 5) Orchestration & Tracking
Шар оркестрації pipeline та трекінгу експериментів/метрик (зокрема, MLflow через порти/адаптери).

---

## 4. Phenomena & Metrics (Явища та метрики оцінки)

### Structural Drift (Структурний дрейф)
Зміна топології або логіки процесу в часі, що призводить до невідповідності навченої моделі актуальному регламенту.

### Data Drift (Дрейф даних)
Зсув розподілу атрибутів подій або ресурсних ознак без обов'язкової зміни нормативної топології процесу.

### Concept Drift (Концептуальний дрейф)
Зміна залежності між ознаками та цільовою змінною в часі, яка потребує адаптації параметрів моделі.

### Recurring Concept Drift (Рецидивний / повторюваний дрейф)
Періодичне повернення раніше спостережуваних патернів виконання процесу після фази їх зникнення.

### Intra-trace Drift (Внутрішньотрейсовий дрейф)
Зміни маршруту/контексту, що виникають всередині одного активного кейсу (trace).

### Епістемічна невизначеність
Невпевненість моделі, викликана браком знань про нові структурні стани (OOD). На відміну від випадкового шуму, може бути зменшена через адаптацію до EPOKG.

### Епістемічна обережність
Стратегія, за якої при перевищенні порогу OOD-невизначеності ($\tau_{ood}$) система віддає пріоритет безпеці (експертному рішенню), а не автоматичному прогнозу.
- **Узгодження позначень:** $\beta$ (або $\beta^{(t)}$) не є порогом OOD; це коефіцієнт структурної релаксації у функції втрат.

### Out-of-Distribution (OOD)
Стан або траєкторія процесу, що виходить за межі навчального розподілу поточної версії моделі.

### Out-of-Scope Rate (OOS)
Метрика, що визначає відсоток прогнозів, які порушують нормативні обмеження або заводять процес у «глухий кут».

### Алгоритмічна життєздатність (Survivability)
Здатність системи зберігати цільову точність та безпеку при зміні структури BPMN-моделі.

### Відстань Вассерштейна ($\mathcal{W}_1$ / Wasserstein Distance)
Математична метрика для вимірювання макро-рівня топологічного дрейфу між розподілами графа поточної ($\kappa$) та нової ($\kappa+1$) версій регламенту. Використовується Семафором надійності для детекції OOD.

### Коефіцієнт структурної релаксації ($\beta^{(t)}$)
Динамічний параметр функції втрат, який алгоритмічно знижує вагу структурного регуляризатора (дозволяє моделі контрольовано відхилятися від жорсткого графа EPOKG) при виявленні топологічного дрейфу.

### Zero-Shot Structural Adaptation
Режим роботи системи при мінорному дрейфі, коли модель миттєво синхронізує прогнози з новим регламентом без перенавчання ваг (за рахунок оновлення графа на вході).

### Few-Shot Adaptation (Controlled Fine-Tuning)
Режим роботи при мажорному дрейфі (глибокий OOD), коли інференс призупиняється для накопичення буфера нових екземплярів ($n_{min}$) та контрольованого донавчання моделі за участю експерта (Human-in-the-Loop).

---

## 5. Latent Representation

### Prefix Embedding
Векторне представлення виконаного префіксу ($h_{\sigma}$).

### Context Embedding
Контекст версії або структурного середовища ($c_{\sigma}$).

### Fusion Operator (Γ)
Нелінійний оператор, що формує $z_{fused}$.

---


## 7. Masking

### Structural Mask
Детермінований механізм обмеження переходів відповідно до структури процесу.


---

## 8. Drift Detection

### Drift Module
Архітектурний компонент, що реалізує детекцію:

- drift_signal (δ_drift)
- Wasserstein distance
- OOD flags

Не є явищем, а реалізацією детекції drift-феноменів.

---

## 9. Reliability

### Reliability Module — обчислює confidence_score та формує reliability_state.
Механізм оцінки впевненості прогнозу.


---

## 10. Continual Learning

### Version Transition Operator
Оператор переходу κ → κ+1.

### Retraining Policy
Політика перенавчання при виявленні дрейфу.
